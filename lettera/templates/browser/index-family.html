{% extends "base.html" %}
{% load staticfiles %}
{% load i18n %}
{% block title %}
  Index of families
{% endblock %}
{% block header %}
  Index of families
{% endblock %}
{% block content %}
<p> (Beware, it may take some time). </p>

<form role="form">
  <div class="form-group">
  <label> Minimum idf: </label>
  <input type="number" step="0.1" name="minidf" id="minidf" min="0.0" max="8.0" value="0.0">
  </div>
</tr>
<table class="table table-striped" id="myIndexList" width="100%">
    <thead><tr>
      <th> View </th>
      <th> Name </th>
      <th> Size </th>
      <th> Occurrences </th>
      <th> Frequence </th>
      <th> Letters </th>
      <th> Idf </th>
    </tr></thead>
  <tbody>

  </tbody>
</table>
<script>
$.fn.dataTable.ext.search.push(
    function( settings, data, dataIndex ) {
        var min = parseFloat( $('#minidf').val());
        var val = parseFloat( data[6] ) || 0; // use data for the age column
 
        return isNaN(min) || (min <= val);
    }
);

  $(document).ready(function() {
    var oTable = $('#myIndexList').dataTable({
        "bProcessing": true,
        "sAjaxSource": "{% url 'index-family-ajax' %}",
        "aoColumnDefs" : [
             { "mRender" : function (data, type, row) { 
             return '<a href="'+data+'" class="btn btn-default btn-xs">'+
                    '<span class="glyphicon glyphicon-link"></span></a>';
                }, "aTargets": [ 0 ] }],

        "aoColumns": [
             { "mData": "link" },
             { "mData": "name" },
             { "mData": "size" },
             { "mData": "occurrences" },
             { "mData": "frequence" },
             { "mData": "df" },
             { "mData": "idf" }
        ] 
      });
    var tt = new $.fn.dataTable.TableTools( oTable, { "sSwfPath": "{% static 'js/copy_csv_xls_pdf.swf' %}" });
    $( tt.fnContainer() ).insertAfter('div.dataTables_wrapper');
    $('#minidf').change( function() {
        oTable.fnDraw(false);
    } );
  });
</script>
{% endblock %}
